<div class="container mt-5" style="padding-bottom: 5%;">
  <div class="row justify-content-center">
    <div class="col-lg-10 shadow p-4 rounded bg-white">
      <div class="row">
        <div class="col-md-3 text-center d-flex align-items-center justify-content-center mb-4 mb-md-0">
          <i class="bi bi-person-circle" style="font-size: 9rem; color: #000;"><i class="fa-solid fa-circle-user"></i></i>
        </div>
        <div class="col-md-9">
          <h3 class="mb-4 border-bottom pb-2">Mi Perfil</h3>

          <form (ngSubmit)="updateUser()" class="mb-4">
            <div class="mb-3">
              <label class="form-label fw-semibold">Usuario</label>
              <input type="text" [(ngModel)]="identity.user" name="user" #userName="ngModel" class="form-control" required pattern="^([A-Za-z0-9]){4,15}$" />
            </div>
            @if(!userName.valid && userName.touched){
            <small class="invalid-feedback d-block">Formato inválido</small>
            }
            <div class="mb-3">
              <label class="form-label fw-semibold">Correo</label>
              <input type="email" [(ngModel)]="identity.email" name="email" #email="ngModel" class="form-control" required pattern="\b[\w\.-]+@[\w\.-]+\.\w{2,4}\b" />
            </div>
            @if(!email.valid && email.touched){
            <small class="invalid-feedback d-block">Formato de correo inválido</small>
            }
            <div class="d-flex flex-wrap gap-2">
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-save me-1"></i> Actualizar datos
              </button>
              <button type="button" class="btn btn-danger" (click)="deleteAccount()">
                <i class="bi bi-trash me-1"></i> Eliminar cuenta
              </button>
            </div>
          </form>
          <form (ngSubmit)="updatePassword()">
            <h5 class="mb-3">Cambiar contraseña</h5>
            <div class="mb-3">
              <label class="form-label fw-semibold">Nueva contraseña</label>
              <input type="password" [(ngModel)]="passwordData.password" name="password" #password="ngModel" class="form-control" required pattern="^(?=.*\d)(?=.*[a-z])(?=.*[a-zA-Z]).{8,}$" />
            </div>
            @if(!password.valid && password.touched){
            <small class="invalid-feedback d-block">Formato inválido tiene que tener al menos 8 caracteres, <br> al menos un numero y puede contener caracteres especiales </small>
            }
            <div class="mb-3">
              <label class="form-label fw-semibold">Confirmar nueva contraseña</label>
              <input type="password" [(ngModel)]="passwordData.confirmPassword" name="confirmPassword" #confirmPassword="ngModel" class="form-control" required pattern="^(?=.*\d)(?=.*[a-z])(?=.*[a-zA-Z]).{8,}$" />
            </div>
            @if(!confirmPassword.valid && confirmPassword.touched){
            <small class="invalid-feedback d-block">Formato inválido tiene que tener al menos 8 caracteres, <br> al menos un numero y puede contener caracteres especiales </small>
            }
            <button type="submit" class="btn btn-warning">
              <i class="bi bi-key me-1"></i> Cambiar contraseña
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
