<div class="header text-center py-3 bg-primary text-white">
  <h1>Gesti√≥n de Proveedores</h1>
</div>

<div class="container my-4">

  <!-- üîç Filtro de b√∫squeda -->
  <div class="mb-4">
    <label for="filterType" class="form-label fw-bold">Buscar, borrar o modificar por:</label>
    <div class="row g-2 align-items-center">
      <div class="col-md-4">
        <select id="filterType" class="form-select" [(ngModel)]="filterType">
          <option value="id">ID</option>
          <option value="name">Nombre</option>
        </select>
      </div>
      <div class="col-md-8">
        <div class="input-group">
          <input type="text" class="form-control"
            [placeholder]="filterType === 'id' ? 'Ingrese el ID del proveedor' : 'Ingrese el nombre del proveedor'"
            [(ngModel)]="searchValue" name="searchValue">

          <button class="btn btn-outline-primary" type="button" (click)="search()">Buscar</button>
          <button class="btn btn-outline-success" type="button" (click)="updateProvider()">Modificar</button>
          <button class="btn btn-outline-danger" type="button" (click)="deleteProvider()">Eliminar</button>
          <button class="btn btn-outline-warning" type="button" *ngIf="showSingleProvider" (click)="clearSearch()">
            Limpiar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- üìù Formulario de proveedor -->
  <div class="card shadow mb-4">
    <div class="card-body">
      <form #providerForm="ngForm" (ngSubmit)="onSubmit(providerForm)">
        <div class="row g-4">
          <div class="col-md-6">
            <label class="form-label fw-bold">Nombre del proveedor</label>
            <div class="input-group">
              <span class="input-group-text"><i class="fa-solid fa-file-contract"></i></span>
              <input type="text" class="form-control" placeholder="Nombre Proveedor" name="type"
                [(ngModel)]="provider.nombre" required>
            </div>
          </div>

          <div class="col-md-6">
            <label class="form-label fw-bold">Descripci√≥n del proveedor</label>
            <div class="input-group">
              <span class="input-group-text"><i class="fa-solid fa-circle-info"></i></span>
              <textarea class="form-control" placeholder="Detalles importantes del proveedor" name="description"
                [(ngModel)]="provider.descrip" required></textarea>
            </div>
          </div>
        </div>

        <div class="text-end mt-4">
          <input type="submit" class="btn btn-success"
            [value]="isEditing ? 'Actualizar proveedor' : 'Guardar proveedor'" [disabled]="providerForm.invalid">
        </div>
      </form>
    </div>
  </div>

  <!-- üìã Tabla de proveedores -->
  <div class="card shadow">
    <div class="card-body">
      <h5 class="card-title">Listado de Proveedores</h5>
      <div class="table-responsive">
        <table class="table table-striped table-bordered mt-3">
          <thead class="table-primary text-center">
            <tr>
              <th scope="col">ID</th>
              <th scope="col">Nombre</th>
              <th scope="col">Descripci√≥n</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of providers">
              <td>{{ item.idproveedor }}</td>
              <td>{{ item.nombre }}</td>
              <td>{{ item.descrip }}</td>
            </tr>
            <tr *ngIf="!providers || providers.length === 0">
              <td colspan="3" class="text-center text-muted">No se encontraron proveedores.</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

</div>

